<!-- index.html -->
<form action="/start-crawling" method="post">
    <input type="text" name="id" placeholder="아이디">
    <input type="password" name="password" placeholder="비밀번호">
    <button type="submit">크롤링 시작</button>
</form>


<script>
document.getElementById("crawlForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const user_id = document.getElementById("user_id").value;
  const user_pw = document.getElementById("user_pw").value;
  const program_title = document.getElementById("program_title").value;

  try {
    const res = await fetch("http://<서버 IP>:5678/apply", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        user_id,
        user_pw,
        title: program_title
      })
    });

    if (res.redirected) {
      window.location.href = res.url; // Flask가 redirect('/') 하면 자동 이동
    } else {
      console.log("서버 응답:", await res.text());
    }
  } catch (err) {
    console.error("크롤링 요청 실패:", err);
  }
});
</script>
