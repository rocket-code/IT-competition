//과제 관리 시스템 제작 코드
  let deadline = null;
  if (deadlineMatch) {
    const month = deadlineMatch[1].padStart(2, '0');
    const day = deadlineMatch[2].padStart(2, '0');
    deadline = `2025-${month}-${day}`;
  }

  const assignmentName = line.split(/\/|전공|교양|\d{1,2}월\s?\d{1,2}일/)[0].trim();

  return {
    과제명: assignmentName,
    과제유형: type,
    소요시간: estimatedTime,
    전공유무: isMajor ? "✅" : "",
    전공계산용: isMajor,
    마감기한: deadline
  };
}

// main
const lines = textInput3.value.split('\n').filter(line => line.trim() !== '');
if (!lines.length) {
  utils.showNotification({
    title: "❌ 입력 오류",
    description: "한 줄 이상의 과제 정보를 입력하세요.",
    notificationType: "error"
  });
  return;
}

const today = new Date();

const parsed = lines.map(parseAssignment).map(task => {
  const due = new Date(task.마감기한);
  const daysLeft = Math.max(1, (due - today) / (1000 * 60 * 60 * 24));
  const deadlineScore = 10 / daysLeft;
  const majorScore = task.전공계산용 ? 3 : 0;
  const timeScore = task.소요시간 * 0.5;

  const priority = Math.round((deadlineScore + majorScore + timeScore) * 10) / 10;

  return {
    과제명: task.과제명,
    과제유형: task.과제유형,
    소요시간: task.소요시간,
    전공유무: task.전공유무,
    마감기한: task.마감기한,
    우선순위: priority
  };
});

// 우선순위 높은 순으로 정렬
parsed.sort((a, b) => b.우선순위 - a.우선순위);

// 🔁 Table로 return (setData 안 씀!)
console.log("🔍 분석 완료 과제 목록", parsed);
return parsed;
