//ê³¼ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì œì‘ ì½”ë“œ
  let deadline = null;
  if (deadlineMatch) {
    const month = deadlineMatch[1].padStart(2, '0');
    const day = deadlineMatch[2].padStart(2, '0');
    deadline = `2025-${month}-${day}`;
  }

  const assignmentName = line.split(/\/|ì „ê³µ|êµì–‘|\d{1,2}ì›”\s?\d{1,2}ì¼/)[0].trim();

  return {
    ê³¼ì œëª…: assignmentName,
    ê³¼ì œìœ í˜•: type,
    ì†Œìš”ì‹œê°„: estimatedTime,
    ì „ê³µìœ ë¬´: isMajor ? "âœ…" : "",
    ì „ê³µê³„ì‚°ìš©: isMajor,
    ë§ˆê°ê¸°í•œ: deadline
  };
}

// main
const lines = textInput3.value.split('\n').filter(line => line.trim() !== '');
if (!lines.length) {
  utils.showNotification({
    title: "âŒ ì…ë ¥ ì˜¤ë¥˜",
    description: "í•œ ì¤„ ì´ìƒì˜ ê³¼ì œ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.",
    notificationType: "error"
  });
  return;
}

const today = new Date();

const parsed = lines.map(parseAssignment).map(task => {
  const due = new Date(task.ë§ˆê°ê¸°í•œ);
  const daysLeft = Math.max(1, (due - today) / (1000 * 60 * 60 * 24));
  const deadlineScore = 10 / daysLeft;
  const majorScore = task.ì „ê³µê³„ì‚°ìš© ? 3 : 0;
  const timeScore = task.ì†Œìš”ì‹œê°„ * 0.5;

  const priority = Math.round((deadlineScore + majorScore + timeScore) * 10) / 10;

  return {
    ê³¼ì œëª…: task.ê³¼ì œëª…,
    ê³¼ì œìœ í˜•: task.ê³¼ì œìœ í˜•,
    ì†Œìš”ì‹œê°„: task.ì†Œìš”ì‹œê°„,
    ì „ê³µìœ ë¬´: task.ì „ê³µìœ ë¬´,
    ë§ˆê°ê¸°í•œ: task.ë§ˆê°ê¸°í•œ,
    ìš°ì„ ìˆœìœ„: priority
  };
});

// ìš°ì„ ìˆœìœ„ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
parsed.sort((a, b) => b.ìš°ì„ ìˆœìœ„ - a.ìš°ì„ ìˆœìœ„);

// ğŸ” Tableë¡œ return (setData ì•ˆ ì”€!)
console.log("ğŸ” ë¶„ì„ ì™„ë£Œ ê³¼ì œ ëª©ë¡", parsed);
return parsed;
